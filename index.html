<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../dist/css/reset.css">
    <!-- <link rel="stylesheet" href="../dist/css/bootstrap.min.css"> -->
    <link rel="stylesheet" href="../dist/css/index.css">
    <script src="../js/jquery-1.11.0.js"></script>
    <script src="../js/jquery.min.js"></script>
    <style>
        #pro_wrap {
            position: relative;
            background: #f6f6f6;
        }
        
        #wrap {
            position: relative;
            width: 1110px;
            top: 20px;
            left: 0;
            margin: 0 auto;
            margin-bottom: 50px;
        }
        
        #wrap div {
            position: relative;
            width: 330px;
            height: 450px;
            box-shadow: 2px 2px 4px #e3e3e3;
            overflow: hidden;
            float: left;
            padding: 10px;
            margin-right: 20px;
            margin-bottom: 20px;
            background: #fff;
        }
    </style>

</head>

<body>
    <div class="header_wrap">
        <div class="header_con  clean">
            <div class="top_l clean">
                <ul>
                    <li>欢迎来到聚美！</li>
                    <li>
                        <a href="">请登录</a>
                    </li>
                    <li>
                        <a href="">快速注册</a>
                    </li>
                </ul>
            </div>
            <div class="top_r">
                <ul>
                    <li><a href="">正品保证</a> </li>
                    <li><a href="">订单查询</a> </li>
                    <li><span class="heart"></span><a href="">收藏的商品</a></li>
                    <li class="xia"><a href="">我的聚美</a><span class="tou"></span>
                        <ul class="woDe">
                            <li><a href="">我的订单</a></li>
                            <li><a href="">我的现金券</a></li>
                            <li><a href="">我的红包</a></li>
                            <li><a href="">我的余额</a></li>
                            <li><a href="">我的提现退款</a></li>
                            <li><a href="">我的收藏</a></li>
                            <li><a href="">我的心愿单</a></li>
                            <li><a href="">会员中心</a></li>
                            <li><a href="">礼品卡兑换</a></li>
                        </ul>
                    </li>

                    <li><span class="phone"></span><a style="color:#ed155b;" href="">手机聚美</a></li>
                    <li class="xia"><a href="">更多</a><span class="tou"></span>
                        <ul class="gen_duo">
                            <li><a href="">邀请好友</a></li>
                            <li><a href="">加入收藏</a></li>
                            <li><a href="">新浪微博</a></li>
                            <li><a href="">聚美微信</a></li>
                            <li><a href="">我的提现退款</a></li>
                            <li><a href="">百度贴吧</a></li>
                            <li><a href="">腾讯微博</a></li>
                            <li><a href="">人人公众主页</a></li>

                        </ul>
                    </li>
                </ul>



            </div>
        </div>
    </div>
    <div class="logo_search">
        <div class="logo">
            <img src="../img/logo.jpg" alt="">
        </div>
        <div class="search">
            <form action="">
                <input type="text">
                <button type="submit">搜索</button>
            </form>
            <ul class="search_nav">
                <li>
                    <a href="">保湿</a>
                </li>
                <li>
                    <a href="">面膜</a>
                </li>
                <li>
                    <a href="">洗面奶</a>
                </li>
                <li>
                    <a href="">补水</a>
                </li>
                <li>
                    <a href="">香水</a></a>
                </li>
                <li>
                    <a href="">眼霜</a>
                </li>
                <li>
                    <a href="">口红</a>
                </li>
                <li>
                    <a href="">护肤套装</a>
                </li>
                <li>
                    <a href="">BB霜</a>
                </li>
            </ul>
        </div>
        <div class="shopCar top_r">
            <img src="../img/cart.gif" alt="">
            <ul class="jie">
                <li class="xia"><a href="">去购物车结算</a><span class="tou"></span></li>
            </ul>
        </div>
    </div>
    <div class="navWrap">
        <div class="nav_two">
            <ul>
                <li><a href="">首页</a></li>
                <li><a href="">极速免税店</a></li>
                <li><a href="">母婴特卖</a></li>
                <li><a href="">美妆商城</a></li>
                <li><a href="">国际轻奢</a></li>
                <li><a href="">服装运动</a></li>
                <li><a href="">鞋包配饰</a></li>
            </ul>
            <div>
                <a href=""><img src="../img/z_01new.jpg" alt=""></a>
                <a href=""><img src="../img/z03.jpg" alt=""></a>
            </div>





        </div>
    </div>
    <div class="banner">
        <img src="../img/banner.jpg" alt="">

    </div>
    <div class="tit_tit">
        <img src="../img/old_top_tit.jpg" alt="">
    </div>
    <div class="tit_con">
        <p><span></span> 每日十点上新</p>
    </div>
    <div id="pro_wrap" class="clean">
        <div id="wrap" class="clean">
            <div>
                <span><a href="detail.html?pid="><img src="../img/01.jpg"></a>
                    <p>新品上线，赶快来试试吧！</p>
                    <input type="button" class="btnN" data-id="" value="加入购物车">
                </span>

                <h4>【限时79元2套，118元3套】韩版棉质长袖睡衣套装舒适家居服 多款选</h4>
                <i>￥288</i>
            </div>
            <div>
                <span><a href=""><img src="../img/02.jpg"></a>
                    <p>新品上线，赶快来试试吧！</p>
                    <input type="button" class="btnN" data-id="" value="加入购物车">
                </span>

                <h4>【3盒装】蒂佳婷药丸面膜（蓝色补水镇静+绿色晒后修护+黑色清洁）</h4>
                <i>￥96</i>
            </div>
            <div>
                <span><a href=""><img src="../img/03.jpg"></a>
                    <p>新品上线，赶快来试试吧！</p>
                    <input type="button" class="btnN" data-id="" value="加入购物车">
                </span>

                <h4>官方授权中国台湾•欣兰多媚卡雅黑冻膜225g</h4>
                <i>￥99</i>
            </div>

            <!-- <div>

                <span><a href=""><img src="../img/04.jpg"></a>
                    <p>新品上线，赶快来试试吧！</p>
                    <input type="button" class="btnN">
                </span>

                <h4>【聚美直发包邮】李佳琦推荐OMG蜜梨提拉紧致抗初老六胜肽面霜50g</h4>
                <i>￥49.9</i>
            </div>
            <div>
                <span><a href=""><img src="../img/05.jpg"></a>
                    <p>新品上线，赶快来试试吧！</p>
                </span>

                <h4>【5款任选2件35,3件48,4件65包邮】泰国乳胶养胸嫩肌无钢圈无痕文胸</h4>
                <i>￥25</i>
            </div>
            <div>
                <span><a href=""><img src="../img/06.jpg"></a>
                    <p>新品上线，赶快来试试吧！</p>
                </span>

                <h4>李佳琦推荐UNNY遮瑕笔遮瑕膏遮盖斑点痘印遮瑕液7.5g</h4>
                <i>￥49</i>
            </div> -->

        </div>
    </div>

    <div class="foot">
        <div class="footWrap">
            <div class="footer_top">
                <div class="box">
                    <span></span>
                    <h2>值得信赖美妆电商
                    </h2>
                    <p>四千万用户信赖</p>

                </div>
                <div class="box">
                    <span></span>
                    <h2>值得信赖美妆电商
                    </h2>
                    <p>四千万用户信赖</p>

                </div>
                <div class="box">
                    <span></span>
                    <h2>值得信赖美妆电商
                    </h2>
                    <p>四千万用户信赖</p>

                </div>
                <div class="box">
                    <span></span>
                    <h2>值得信赖美妆电商
                    </h2>
                    <p>四千万用户信赖</p>

                </div>
                <div class="box">
                    <span></span>
                    <h2>值得信赖美妆电商
                    </h2>
                    <p>四千万用户信赖</p>

                </div>
                <div class="box">
                    <span></span>
                    <h2>值得信赖美妆电商
                    </h2>
                    <p>四千万用户信赖</p>

                </div>
            </div>
            <div class="server_con">
                <div class="server1">
                    <h3>服务保障</h3>
                    <ul>
                        <li><a href="">品牌真品防伪码</a></li>
                        <li><a href="">正品保证</a></li>
                        <li><a href="">专属客服服务</a></li>
                        <li><a href="">总裁邮箱ceo@jumei.com</a></li>
                    </ul>
                </div>
                <div class="server1">
                    <h3>使用帮助</h3>
                    <ul>
                        <li><a href="">新手指南</a></li>
                        <li><a href="">常见问题</a></li>
                        <li><a href="">帮助中心</a></li>
                        <li><a href="">用户协议</a></li>
                        <li><a href="">公示制度</a></li>
                        <li><a href="">聚美隐私权政策</a></li>
                        <li><a href="">个人信息管理规则</a></li>
                        <li><a href="">意见反馈及投诉举报规则</a></li>
                        <li><a href="">知识产权维权处理规则</a></li>
                        <li><a href="">评价管理规则</a></li>

                    </ul>
                </div>
                <div class="server1">
                    <h3>支付方式</h3>
                    <ul>
                        <li><a href="">货到付款</a></li>
                        <li><a href="">在线支付</a></li>
                        <li><a href="">余额支付</a></li>
                        <li><a href="">现金券支付</a></li>


                    </ul>
                </div>
                <div class="server1">
                    <h3>支付方式</h3>
                    <ul>
                        <li><a href="">货到付款</a></li>
                        <li><a href="">在线支付</a></li>
                        <li><a href="">余额支付</a></li>
                        <li><a href="">现金券支付</a></li>


                    </ul>
                </div>
                <div class="server1">
                    <h3>支付方式</h3>
                    <ul>
                        <li><a href="">货到付款</a></li>
                        <li><a href="">在线支付</a></li>
                        <li><a href="">余额支付</a></li>
                        <li><a href="">现金券支付</a></li>


                    </ul>
                </div>
                <div class="server1">
                    <h3>手机聚美</h3>
                    <img src="" alt="">
                    <h4>下载移动客户端</h4>
                </div>
                <div class="server1">
                    <h3>聚美微信</h3>
                    <img src="" alt="">
                    <h4>聚美官方微信</h4>
                </div>

            </div>


        </div>
        <div class="daiYan">
            <img src="../img/footer_dy.jpg" alt="">
        </div>
        <div class="footer_nav_wrap">
            <div class="footer_nav">
                <ul>
                    <li>
                        <a href="">关于聚美优品</a>
                    </li>
                    <li>
                        <a href="">INVESTOR RELATIONS</a>
                    </li>
                    <li>
                        <a href="">合作招商</a>
                    </li>
                    <li>
                        <a href="">获取更新</a>
                    </li>
                    <li>
                        <a href="">加入聚美</a>
                    </li>
                    <li>
                        <a href="">品牌合作专区</a>
                    </li>
                    <li>
                        <a href="">媒体报道</a>
                    </li>
                    <li>
                        <a href="">商务合作</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="foot_last_wrap">
            <div class="foot_last">
                <p> COPYRIGHT © 2010-2019 北京创锐文化传媒有限公司 JUMEI.COM 保留一切权利。 客服热线：400-123-8888
                </p>
                <br>
                <p>
                    京公网安备 11010102001226 | <a href="">食品经营许可证</a> |
                    <a href="">营业执照</a>|<a href="">ICP许可证</a>|<a href="">出版物经营许可证</a>|<a href="">第二类医疗器械经营备案凭证</a>|<a href="">网络食品交易第三方平台提供者备案信息表</a>|<a href="">增值电信业务经营许可证</a> </p>
                <div class="footer_img">
                    <div class="footerImg1">

                    </div>
                    <div class="footerImg2"></div>
                    <div class="footerImg3"></div>
                    <div class="footerImg4"></div>
                    <div class="footerImg5"></div>

                </div>
            </div>
        </div>
    </div>


    <div class="right_fixed">
        <ul class="fixed_center">
            <li>
                <a href="">
                    <s></s>
                </a>
            </li>
            <li style="height:120px;">
                <a href="">

                    <s></s> 购物车
                    <span>0</span>
                </a>
            </li>
            <li class="aaa">
                <a href="">
                    <s></s>
                </a>
            </li>
            <li class="aaa">
                <a href="">
                    <s></s>
                </a>
            </li>
            <li class="aaa">
                <a href="">
                    <s></s>
                </a>
            </li>
        </ul>
        <ul class="fixed_bottom">
            <li class="aaa">
                <a href="">
                    <s></s>
                </a>
            </li>
            <li class="aaa">
                <a href="">
                    <s></s>
                </a>
            </li>
            <li class="aaa">
                <a href="">
                    <s></s>
                </a>
            </li>
        </ul>
    </div>
    <script src="../js/data.js"></script>
    <script>
        $(function() {
            console.log($(".top_r .xia").eq(0))
            $(".top_r .xia").eq(0).hover(function() {
                $(".top_r .woDe").stop().slideToggle("quality");
                return false;
            });
            $(".top_r .xia").eq(1).hover(function() {
                $(".top_r .gen_duo").stop().slideToggle("quality");
                return false;
            });


            $.get("http://jx.xuzhixiang.top/ap/api/productlist.php", {

            }, data => {
                console.log(data)
            })
            $.get("http://jx.xuzhixiang.top/ap/api/productlist.php", {
                uid: 38734,
                pagesize: 100
            }, data => {
                console.log(data)
            })
        });
    </script>
    <script>
        $.get("http://jx.xuzhixiang.top/ap/api/productlist.php", {
            uid: 38734
        }, data => {
            console.log(data);
            var data1 = data.data
            console.log(data1)

            // window.onload = window.onresize = function() { //等图片加载完毕之后再去处理代码
            //     var fw = new WaterFall();
            //     fw.scroll();
            // }

            function WaterFall() {
                this.wrap = document.getElementById("wrap");
                this.aItems = this.wrap.children;

                this.ml = this.mt = 10; //间距
                this.totalWidth = this.wrap.clientWidth; //可视区域的总宽度
                this.perWidth = this.aItems[0].offsetWidth + this.ml; //单位宽
                this.cols = Math.floor(this.totalWidth / this.perWidth); //列数（栏数）

                this.arrHei = []; //保存各列的高度

                this.confirmFirstPosition();
                this.confirmOtherPosition(this.cols);

            }
            WaterFall.prototype.confirmFirstPosition = function() {
                //排出第一行
                for (let i = 0; i < this.cols; i++) {
                    this.aItems[i].style.top = 0;
                    //this.aItems[i].style.left = i * this.perWidth + "px";
                    this.arrHei.push(this.aItems[i].offsetHeight);
                }
            }

            WaterFall.prototype.getMin = function() { //取数组的最小值和最小值索引
                this.minVal = Math.min.apply(null, this.arrHei); //最小值
                this.minIndex = this.arrHei.indexOf(this.minVal); //最小值索引
            }

            WaterFall.prototype.confirmOtherPosition = function(initIndex) { //确认其他区块位置

                for (let i = initIndex; i < this.aItems.length; i++) {
                    this.getMin();
                    this.aItems[i].style.left = this.aItems[this.minIndex].style.left;
                    //this.aItems[i].style.top = this.minVal + this.mt + "px";
                    //更新最小高度那一列的高度值
                    this.arrHei[this.minIndex] += this.aItems[i].offsetHeight + this.mt;
                }

            }

            WaterFall.prototype.scroll = function() { //随着滚动条滚动，不断的加载数据，排到页面的底部

                    window.onscroll = () => {
                        var st = document.documentElement.scrollTop || document.body.scrollTop;
                        this.getMin();

                        if (st >= this.minVal - document.documentElement.clientHeight && st <= 500) {
                            var str = "";
                            for (let i = 0; i < data1.length; i++) {
                                console.log(data1[i])
                                var oDiv = document.createElement("div");
                                str = `<span><a href="detail.html?pid=${data1[i].pid}"><img src="${data1[i].pimg}"></a>
                                <p>新品上线，赶快来试试吧！</p>
                                <input type="button" class="btnN" data-id="${data1.pid}" value="加入购物车">
                            </span>

                            <h4>${data1[i].pdesc}</h4>
                            <i>￥${data1[i].pprice}</i>`
                                oDiv.innerHTML = str;
                                this.wrap.appendChild(oDiv);
                            }
                            // data1.forEach(item => {
                            //     var oDiv = document.createElement("div");

                            //     // str = `<span><a href=""><img src="${data1[item].pimg}"></a>
                            //     //     <p>新品上线，赶快来试试吧！</p>
                            //     // </span>

                            //     // <h4>${data1[item].pdesc}</h4>
                            //     // <i>￥${data1[item].pprice}</i>`
                            //     oDiv.innerHTML = str;
                            //     this.wrap.appendChild(oDiv);
                            // });
                            //新增的区块按照之前的规律进行排列
                            this.confirmOtherPosition(this.aItems.length - data.length);
                        }

                    }

                }
                //     // window.onload = function() { //等图片加载完毕之后再去处理代码
            var fw = new WaterFall();
            fw.scroll();
            // // }


        })
    </script>

</body>

</html>